# Running

```shell
docker-compose build

docker-compose up {dotnet|fastify}
```

# Checking stats

You can check in real time how much memory and cpu is consumed by the containers

```shell
docker stats $( docker ps --format '{{ .Names }}' )
```

# Benchmarking

```shell
autocannon -c 100 -d 40 -p 10 localhost:5105
```

# Results

## Dotnet

autocannon -c 100 -d 40 -p 10 localhost:5105
Running 40s test @ http://localhost:5105
100 connections with 10 pipelining factor

┌─────────┬───────┬───────┬────────┬────────┬──────────┬───────┬────────┐
│ Stat    │ 2.5%  │ 50%   │ 97.5%  │ 99%    │ Avg      │ Stdev │ Max    │
├─────────┼───────┼───────┼────────┼────────┼──────────┼───────┼────────┤
│ Latency │ 11 ms │ 28 ms │ 108 ms │ 165 ms │ 37.03 ms │ 31 ms │ 619 ms │
└─────────┴───────┴───────┴────────┴────────┴──────────┴───────┴────────┘
┌───────────┬────────┬────────┬─────────┬─────────┬──────────┬──────────┬────────┐
│ Stat      │ 1%     │ 2.5%   │ 50%     │ 97.5%   │ Avg      │ Stdev    │ Min    │
├───────────┼────────┼────────┼─────────┼─────────┼──────────┼──────────┼────────┤
│ Req/Sec   │ 5495   │ 5495   │ 32655   │ 34367   │ 26637.95 │ 10152.31 │ 5495   │
├───────────┼────────┼────────┼─────────┼─────────┼──────────┼──────────┼────────┤
│ Bytes/Sec │ 967 kB │ 967 kB │ 5.75 MB │ 6.05 MB │ 4.69 MB  │ 1.79 MB  │ 967 kB │
└───────────┴────────┴────────┴─────────┴─────────┴──────────┴──────────┴────────┘

## Fastify

┌─────────┬───────┬────────┬────────┬────────┬───────────┬───────────┬─────────┐
│ Stat    │ 2.5%  │ 50%    │ 97.5%  │ 99%    │ Avg       │ Stdev     │ Max     │
├─────────┼───────┼────────┼────────┼────────┼───────────┼───────────┼─────────┤
│ Latency │ 74 ms │ 124 ms │ 210 ms │ 269 ms │ 139.68 ms │ 202.02 ms │ 7359 ms │
└─────────┴───────┴────────┴────────┴────────┴───────────┴───────────┴─────────┘
┌───────────┬────────┬────────┬─────────┬─────────┬─────────┬─────────┬────────┐
│ Stat      │ 1%     │ 2.5%   │ 50%     │ 97.5%   │ Avg     │ Stdev   │ Min    │
├───────────┼────────┼────────┼─────────┼─────────┼─────────┼─────────┼────────┤
│ Req/Sec   │ 1339   │ 1339   │ 7375    │ 8255    │ 7117.83 │ 1092.72 │ 1339   │
├───────────┼────────┼────────┼─────────┼─────────┼─────────┼─────────┼────────┤
│ Bytes/Sec │ 252 kB │ 252 kB │ 1.39 MB │ 1.55 MB │ 1.34 MB │ 205 kB  │ 252 kB │
└───────────┴────────┴────────┴─────────┴─────────┴─────────┴─────────┴────────┘

